import{aa as e,b as t,c as a,k as r,L as i,n as o,w as n,l as d,t as l,F as s,f as g,h as u,K as p,u as c,E as m,ad as h,A as C,v as y,e as v,H as f,d as w,r as b,i as k,B as R,q as S,T as x,x as I,o as P,y as T,s as E,z as D}from"./index-WruVlziS.js";import{g as M}from"./gridUtils-DjHApC85.js";import{P as _}from"./popup-container-Dv1dBd7I.js";import{E as F}from"./element-text-BpkoH2im.js";import{S as V}from"./search-container-5xxIWbSQ.js";var L,B={exports:{}};const N=e(L?B.exports:(L=1,B.exports=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,r=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,n={},d=function(e){return(e=+e)+(e>68?1900:2e3)},l=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),a=60*t[1]+(+t[2]||0);return 0===a?0:"+"===t[0]?-a:a}(e)}],g=function(e){var t=n[e];return t&&(t.indexOf?t:t.s.concat(t.f))},u=function(e,t){var a,r=n.meridiem;if(r){for(var i=1;i<=24;i+=1)if(e.indexOf(r(i,0,t))>-1){a=i>12;break}}else a=e===(t?"pm":"PM");return a},p={A:[o,function(e){this.afternoon=u(e,!1)}],a:[o,function(e){this.afternoon=u(e,!0)}],Q:[a,function(e){this.month=3*(e-1)+1}],S:[a,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[i,l("seconds")],ss:[i,l("seconds")],m:[i,l("minutes")],mm:[i,l("minutes")],H:[i,l("hours")],h:[i,l("hours")],HH:[i,l("hours")],hh:[i,l("hours")],D:[i,l("day")],DD:[r,l("day")],Do:[o,function(e){var t=n.ordinal,a=e.match(/\d+/);if(this.day=a[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],w:[i,l("week")],ww:[r,l("week")],M:[i,l("month")],MM:[r,l("month")],MMM:[o,function(e){var t=g("months"),a=(g("monthsShort")||t.map(function(e){return e.slice(0,3)})).indexOf(e)+1;if(a<1)throw new Error;this.month=a%12||a}],MMMM:[o,function(e){var t=g("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,l("year")],YY:[r,function(e){this.year=d(e)}],YYYY:[/\d{4}/,l("year")],Z:s,ZZ:s};function c(a){var r,i;r=a,i=n&&n.formats;for(var o=(a=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,a,r){var o=r&&r.toUpperCase();return a||i[r]||e[r]||i[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,a){return t||a.slice(1)})})).match(t),d=o.length,l=0;l<d;l+=1){var s=o[l],g=p[s],u=g&&g[0],c=g&&g[1];o[l]=c?{regex:u,parser:c}:s.replace(/^\[|\]$/g,"")}return function(e){for(var t={},a=0,r=0;a<d;a+=1){var i=o[a];if("string"==typeof i)r+=i.length;else{var n=i.regex,l=i.parser,s=e.slice(r),g=n.exec(s)[0];l.call(t,g),e=e.replace(g,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var a=e.hours;t?a<12&&(e.hours+=12):12===a&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,a){a.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(d=e.parseTwoDigitYear);var r=t.prototype,i=r.parse;r.parse=function(e){var t=e.date,r=e.utc,o=e.args;this.$u=r;var d=o[1];if("string"==typeof d){var l=!0===o[2],s=!0===o[3],g=l||s,u=o[2];s&&(u=o[2]),n=this.$locale(),!l&&u&&(n=a.Ls[u]),this.$d=function(e,t,a,r){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var i=c(t)(e),o=i.year,n=i.month,d=i.day,l=i.hours,s=i.minutes,g=i.seconds,u=i.milliseconds,p=i.zone,m=i.week,h=new Date,C=d||(o||n?1:h.getDate()),y=o||h.getFullYear(),v=0;o&&!n||(v=n>0?n-1:h.getMonth());var f,w=l||0,b=s||0,k=g||0,R=u||0;return p?new Date(Date.UTC(y,v,C,w,b,k,R+60*p.offset*1e3)):a?new Date(Date.UTC(y,v,C,w,b,k,R)):(f=new Date(y,v,C,w,b,k,R),m&&(f=r(f).week(m).toDate()),f)}catch(S){return new Date("")}}(t,d,r,a),this.init(),u&&!0!==u&&(this.$L=this.locale(u).$L),g&&t!=this.format(d)&&(this.$d=new Date("")),n={}}else if(d instanceof Array)for(var p=d.length,m=1;m<=p;m+=1){o[1]=d[m-1];var h=a.apply(this,o);if(h.isValid()){this.$d=h.$d,this.$L=h.$L,this.init();break}m===p&&(this.$d=new Date(""))}else i.call(this,e)}}}())),O={initContent:function(e,t){const a=this._divContainer=document.createElement("div");a.className="realGrid-popup-link";const r=this._btnContainer=document.createElement("div");r.className="popup-buttons",this._btnDel=document.createElement("button"),this._btnSearch=document.createElement("button"),r.appendChild(this._btnDel),r.appendChild(this._btnSearch),e.appendChild(a),e.appendChild(r)},canClick:function(){return!0},clearContent:function(e){e.innerHTML=""},render:function(e,t,a,r,i={}){const o=this._divContainer,n=this._btnContainer,d=t.dataColumn.renderer.popupId||"",l=t.dataColumn.renderer.nameFields||[],s=t.dataColumn.renderer.refFields||[],g=t.dataColumn.renderer.isVisible;o.textContent="",n.textContent="";let u="";if(l.length>0){const a=l.map(a=>e.getValue(t.index.itemIndex,a)).filter(e=>e);u=a.length>0?`${t.value||""} [${a.join(" | ")}]`:t.value||""}else u=t.value||"";const p=document.createElement("span");p.textContent=u,p.className="popup-text",p.title=u,this._value=t.value,this._btnDel.id="btnDel",this._btnDel.className="ico-del",this._btnDel.refFields=s,this._btnDel.textContent="삭제",this._btnSearch.id="btnSearch",this._btnSearch.popupId=d,this._btnSearch.nameFields=l,this._btnSearch.refFields=s,this._btnSearch.className="ico-search",this._btnSearch.textContent="검색",g&&(t.value&&n.appendChild(this._btnDel),n.appendChild(this._btnSearch)),o.appendChild(p),o.appendChild(n)},click:function(e){if(e.target===this._btnDel||e.target===this._btnSearch){const t={type:"button",target:e.target,btnId:e.target.id,popupId:e.target.popupId||""};return e.target.refFields&&(t.refFields=e.target.refFields),t}}};const H=t({__name:"auth-buttons",props:{programId:{type:String,default:""},authId:{type:String,default:""},authPosition:{type:String,default:""}},emits:["click"],setup(e,{expose:t,emit:a}){const r=g(),{t:i}=u(),o=e,n=a,d=p(()=>{const e=r.getPageAuth(o.programId,o.authId);return c.isEmpty(e)?[]:o.authPosition?e.filter(e=>e.buttonPosition===o.authPosition):e}),l=e=>{const t=d.value.find(t=>t.buttonId===e);t&&(t.disabled=!t.disabled)};t({buttonDisable:l});const s={sessionTempStore:r,t:i,props:o,emit:n,authButtons:d,buttonClick:e=>{n("click",e)},buttonDisable:l,computed:p,get useI18n(){return u},get useSessionTempStore(){return g},get utils(){return c},ElementButton:m};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},[["render",function(e,t,g,u,p,c){return r(!0),a(s,null,i(u.authButtons,e=>(r(),o(u.ElementButton,{key:e.buttonId,onClick:t=>u.buttonClick(e),size:"sm",theme:e.buttonColor},{default:n(()=>[d(l(u.t(e.buttonName)),1)]),_:2},1032,["onClick","theme"]))),128)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/components/layout/auth-buttons.vue"]]),{t:A}=C.global,U=(e,t)=>{c.has(t,"required")&&!0===t.required&&(e.header={template:"${headerText} <span style='color: red;'>*</span>",values:{headerText:t.headerText}})},$=(e,t)=>{c.has(t,"isAddEditable")&&(e.tag.isAddEditable+=t.isAddEditable),c.has(t,"textAlign")&&(t.styleName?t.styleName+=` text-${t.textAlign} `:t.styleName=` text-${t.textAlign} `)},K=e=>{const t={visible:!1,name:e.name,dataType:h.TEXT};return c.merge(t,e)},Y={hidden:K,text:e=>{const t={fieldName:e.name,name:e.name,dataType:h.TEXT,header:{text:e.headerText},renderer:{showTooltip:!c.has(e,"showTooltip")||e.showTooltip},tag:{primaryKey:!!c.has(e,"primaryKey")&&e.primaryKey},editable:!0,autoFilter:!0};return U(t,e),$(t,e),c.merge(t,e)},date:e=>{const t=c.has(e,"dateFormat")?e.dateFormat:"yyyy-MM-dd",a={fieldName:e.name,name:e.name,dataType:h.TEXT,header:{text:e.headerText},datetimeFormat:t,editor:{type:h.DATE,datetimeFormat:t,mask:{editMask:"9999-99-99"}},tag:{primaryKey:!!c.has(e,"primaryKey")&&e.primaryKey},width:120,editable:!0,autoFilter:!0};return U(a,e),$(a,e),c.merge(a,e)},number:e=>{const t=c.has(e,"numberFormat")?e.numberFormat:"#,##0",a={fieldName:e.name,name:e.name,dataType:h.NUMBER,header:{text:e.headerText},numberFormat:t,editor:{type:"number",editFormat:t},renderer:{showTooltip:!c.has(e,"showTooltip")||e.showTooltip},tag:{primaryKey:!!c.has(e,"primaryKey")&&e.primaryKey},editable:!0,autoFilter:!0};return U(a,e),$(a,e),c.has(e,"displayCallback")&&(a.numberFormat=null),c.merge(a,e)},check:e=>{const t={fieldName:e.name,name:e.name,dataType:h.TEXT,header:{text:e.headerText},renderer:{type:"check",trueValues:"Y,y,YES, yes, true, TRUE",falseValues:"N,n,NO,no, false, FALSE"},tag:{primaryKey:!!c.has(e,"primaryKey")&&e.primaryKey},editable:!1,autoFilter:!0};return U(t,e),c.merge(t,e)},select:e=>{const t={fieldName:e.name,name:e.name,dataType:h.TEXT,header:{text:e.headerText},editButtonVisibility:"default",lookupDisplay:!0,lookupData:null,editor:{type:"dropdown",dropDownCount:5,partialMatch:!0,domainOnly:!0,textReadOnly:!0},renderer:{showTooltip:!c.has(e,"showTooltip")||e.showTooltip},tag:{primaryKey:!!c.has(e,"primaryKey")&&e.primaryKey},editable:!0,autoFilter:!0};return U(t,e),$(t,e),c.merge(t,e)},link:e=>{const t={fieldName:e.name,name:e.name,dataType:h.TEXT,header:{text:e.headerText},renderer:{type:"link",urlCallback:()=>"javascript:;",showTooltip:!c.has(e,"showTooltip")||e.showTooltip},tag:{primaryKey:!!c.has(e,"primaryKey")&&e.primaryKey},editable:!1,autoFilter:!0};return U(t,e),$(t,e),c.merge(t,e)},button:e=>{const t={fieldName:e.name,name:e.name,dataType:h.TEXT,header:{text:e.headerText},editable:!1,renderer:{type:"button",buttonStyle:"btn sm"},displayCallback:function(t,a,r){const i=t.getDataSource(),o=a.dataRow;return"created"!==i.getRowState(o)?c.has(e,"btnName")?e.btnName:A("common.button.detail"):""},tag:{readOnly:!0}};return c.merge(t,e)},programId:(e={})=>{const t={fieldName:"programNm",name:"programNm",dataType:h.TEXT,header:{text:A("common.button.detail")},width:120,maxWidth:120,editable:!1,renderer:{type:"popupLinkRenderer",popupId:"ProgramPopup",nameFields:e.nameFields||["programId"],refFields:e.refFields||["programId"],isVisible:!c.has(e,"isVisible")||e.isVisible},tag:{readOnly:!c.has(e,"isVisible")}};return[c.merge(t,e),K({name:"programId"})]},messagesId:(e={})=>{const t=e.nameField,a=e.refField,r={fieldName:t,name:t,dataType:h.TEXT,header:{text:e.headerText},width:150,maxWidth:150,editable:!1,renderer:{type:"popupLinkRenderer",popupId:"MessagesPopup",nameFields:[a],refFields:[a],isVisible:!c.has(e,"isVisible")||e.isVisible},tag:{readOnly:!c.has(e,"isVisible")}};return U(r,e),[c.merge(r,e),K({name:a})]}},{t:j}=C.global,G=(e,t)=>({programId:e,gridId:t,gridTitle:j(`${e}.${t}.title`),setting:{exclusive:!0,isReadOnly:!0},columns:[Y.text({headerText:j(`${e}.${t}.langKey`),name:"langKey",width:"150",textAlign:"left",editable:!1}),Y.text({headerText:j(`${e}.${t}.langKo`),name:"langKo",width:"150",textAlign:"left",editable:!1}),Y.text({headerText:j(`${e}.${t}.langEn`),name:"langEn",width:"150",textAlign:"left",editable:!1})]}),z="gridRef",W={key:0},X={class:"popup_footer"};const Z=t(Object.assign({menuId:"messagesSearchPopup",programId:"MessagesSearchPopup"},{__name:"MessagesSearchPopup",props:{slotProps:{type:Object,default:()=>({})}},emits:["callBackHandler"],setup(e,{expose:t,emit:a}){t();const r=S(),i=r?.type.menuId,o=r?.type.programId,{t:n,locale:d}=u(),l=e,s=a,g=c.cloneDeep(G(o,z)),p=b({isReady:!1,comCodes:{},search:{},gridTitle:g.gridTitle,gridView:null,dataProvider:null}),{isReady:h,comCodes:C,search:y,gridTitle:v,gridView:f,dataProvider:w}=k(p);R(async()=>{h.value=!1,P(),await T(),h.value=!0});const I=()=>{x({menuId:"MessagesMgmt",params:y.value}).then(e=>{M.setData({gridView:f.value,dataProvider:w.value,data:e.data})})},P=()=>{y.value={idName:""}},T=async()=>{},E=()=>{I()},D=()=>{l.slotProps.closeClick()},_={instance:r,menuId:i,programId:o,t:n,locale:d,props:l,emit:s,gridId:z,gridConfig:g,data:p,isReady:h,comCodes:C,search:y,gridTitle:v,gridView:f,dataProvider:w,getDataHandler:I,resetHandler:P,init:T,searchHandler:E,selectClick:()=>{const e=M.getCheckedRowsInfo({gridView:f.value,dataProvider:w.value});e&&e.length>0&&(s("callBackHandler",{langKey:e[0].langKey,langNm:"en"===d.value?e[0].langEn:e[0].langKo}),D())},closeClick:D,gridInit:async(e,t)=>{f.value=e,w.value=t,E()},getCurrentInstance:S,onBeforeMount:R,reactive:b,toRefs:k,get useI18n(){return u},get utils(){return c},get apiCommon(){return x},ElementButton:m,ElementText:F,get gridUtils(){return M},RealGrid:pe,SearchContainer:V,get gridSetting(){return G}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),[["render",function(e,t,i,o,s,g){return o.isReady?(r(),a("div",W,[v(o.SearchContainer,{onSearch:o.searchHandler,onReset:o.resetHandler},{colgroup:n(()=>t[1]||(t[1]=[w("col",{style:{width:"100px"}},null,-1),w("col",{style:{width:"250px"}},null,-1),w("col",{width:"*"},null,-1)])),default:n(()=>[w("tbody",null,[w("tr",null,[w("th",null,l(o.t(`${o.programId}.search.idName.title`)),1),w("td",null,[v(o.ElementText,{modelValue:o.search.idName,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search.idName=e)},null,8,["modelValue"])]),t[2]||(t[2]=w("td",null,null,-1))])])]),_:1}),v(o.RealGrid,{gridTitle:o.gridTitle,gridConfig:o.gridConfig,onGridInit:o.gridInit},null,8,["gridTitle","gridConfig"]),f(e.$slots,"popupBtnGroup"),w("div",X,[v(o.ElementButton,{size:"sm",onClick:o.selectClick},{default:n(()=>[d(l(o.t("common.button.choice")),1)]),_:1}),v(o.ElementButton,{size:"sm",onClick:o.closeClick},{default:n(()=>[d(l(o.t("common.button.close")),1)]),_:1})])])):y("",!0)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/views/_popups/MessagesSearchPopup/MessagesSearchPopup.vue"]]),q=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"})),{t:Q}=C.global,J=(e,t)=>({programId:e,gridId:t,gridTitle:Q(`${e}.${t}.title`),setting:{exclusive:!0,isReadOnly:!0},columns:[Y.text({headerText:Q(`${e}.${t}.programId`),name:"programId",width:"150",textAlign:"left",editable:!1}),Y.text({headerText:Q(`${e}.${t}.programNm`),name:"programNm",width:"150",textAlign:"left",editable:!1})]}),ee="gridRef",te={key:0},ae={class:"popup_footer"};const re=t(Object.assign({menuId:"programSearchPopup",programId:"ProgramSearchPopup"},{__name:"ProgramSearchPopup",props:{slotProps:{type:Object,default:()=>({})}},emits:["callBackHandler"],setup(e,{expose:t,emit:a}){t();const r=S(),i=r?.type.menuId,o=r?.type.programId,{t:n}=u(),d=e,l=a,s=c.cloneDeep(J(o,ee)),g=b({isReady:!1,comCodes:{},search:{},gridTitle:s.gridTitle,gridView:null,dataProvider:null}),{isReady:p,comCodes:h,search:C,gridTitle:y,gridView:v,dataProvider:f}=k(g);R(async()=>{p.value=!1,I(),await P(),p.value=!0});const w=()=>{x({menuId:"ProgramMgmt",params:C.value}).then(e=>{M.setData({gridView:v.value,dataProvider:f.value,data:e.data})})},I=()=>{C.value={idName:"",useYn:"Y"}},P=async()=>{},T=()=>{w()},E=()=>{d.slotProps.closeClick()},D={instance:r,menuId:i,programId:o,t:n,props:d,emit:l,gridId:ee,gridConfig:s,data:g,isReady:p,comCodes:h,search:C,gridTitle:y,gridView:v,dataProvider:f,getDataHandler:w,resetHandler:I,init:P,searchHandler:T,selectClick:()=>{const e=M.getCheckedRowsInfo({gridView:v.value,dataProvider:f.value});e&&e.length>0&&(l("callBackHandler",e[0]),E())},closeClick:E,gridInit:async(e,t)=>{v.value=e,f.value=t,T()},getCurrentInstance:S,onBeforeMount:R,reactive:b,toRefs:k,get useI18n(){return u},get utils(){return c},get apiCommon(){return x},ElementButton:m,ElementText:F,get gridUtils(){return M},RealGrid:pe,SearchContainer:V,get gridSetting(){return J}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),[["render",function(e,t,i,o,s,g){return o.isReady?(r(),a("div",te,[v(o.SearchContainer,{onSearch:o.searchHandler,onReset:o.resetHandler},{colgroup:n(()=>t[1]||(t[1]=[w("col",{style:{width:"100px"}},null,-1),w("col",{style:{width:"250px"}},null,-1),w("col",{width:"*"},null,-1)])),default:n(()=>[w("tbody",null,[w("tr",null,[w("th",null,l(o.t(`${o.programId}.search.idName.title`)),1),w("td",null,[v(o.ElementText,{modelValue:o.search.idName,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search.idName=e)},null,8,["modelValue"])]),t[2]||(t[2]=w("td",null,null,-1))])])]),_:1}),v(o.RealGrid,{gridTitle:o.gridTitle,gridConfig:o.gridConfig,onGridInit:o.gridInit},null,8,["gridTitle","gridConfig"]),f(e.$slots,"popupBtnGroup"),w("div",ae,[v(o.ElementButton,{size:"sm",onClick:o.selectClick},{default:n(()=>[d(l(o.t("common.button.choice")),1)]),_:1}),v(o.ElementButton,{size:"sm",onClick:o.closeClick},{default:n(()=>[d(l(o.t("common.button.close")),1)]),_:1})])])):y("",!0)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/views/_popups/ProgramSearchPopup/ProgramSearchPopup.vue"]]),ie=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),oe={setting:{isReadOnly:!1,headerHeight:30,footerVisible:!1,footerHeight:30,checkBarVisible:!0,checkBarShowAll:!0,syncHeadCheck:!0,exclusive:!1,stateBar:!1,rowIndicatorVisible:!0,indentVisible:!1,fitStyle:"fill",showEmptyMessage:!0,emptyMessage:"No Data",rowHeight:30,rowResizable:!0,eachRowResizable:!1,columnMovable:!1,showChangeMarker:!0,useFocusClass:!1,editable:!0,insertable:!1,appendable:!1,commitByCell:!0,commitWhenLeave:!0,crossWhenExitLast:!0,exceptDataClickWhenButton:!0,validateOnEdited:!0,validateOnExit:!1,enterToTab:!0,commitLevel:"error",exceptFromSorting:!1,colCount:0,lookupDisplay:!0,convertLookupLabel:!0,selectBlockPaste:!0,checkDomainOnly:!0,checkReadOnly:!0,numberChars:[",","%"],applyInputChars:!0,eventEachRow:!0}},ne={__name:"real-grid",props:{gridTitle:{type:String,default:""},gridConfig:{type:Object,default:()=>({})},isEditable:{type:Boolean,default:!0},gridAddClick:{type:Function,required:!1}},emits:["gridInit","gridCellButtonClicked","gridCellClicked","gridCellDblClicked","gridCellEdited","gridCellItemClicked","gridCellPasting","gridColumnCheckedChanged","gridColumnPropertyChanged","gridCommandStackChanged","gridContextMenuItemClicked","gridContextMenuPopup","gridCopy","gridCurrentChanged","gridCurrentChanging","gridCurrentRowChanged","gridCut","gridDataLoadComplated","gridEditCanceled","gridEditChange","gridEditCommit","gridEditRowChanged","gridEditRowPasted","gridEditSearch","gridErrorClicked","gridFiltering","gridFilteringChanged","gridGetEditValue","gridGridActivated","gridHideEditor","gridItemAllChecked","gridItemChecked","gridItemEditCancel","gridItemEditCanceled","gridItemsChecked","gridKeyDown","gridKeypress","gridKeyUp","gridLayoutCollapsed","gridLayoutCollapsing","gridLayoutExpanded","gridLayoutExpanding","gridLayoutPropertyChanged","gridLeftPosChanged","gridMenuItemClicked","gridPaste","gridPasted","gridRowInserting","gridRowsDeleting","gridRowsPasted","gridScrollToBottom","gridSearchCellButtonClick","gridSelectionChanged","gridSelectionCleared","gridShowEditor","gridShowHeaderTooltip","gridShowTooltip","gridSorting","gridSortingChanged","gridTopIndexChanged","gridValidateColumn","gridValidateRow","gridValidationFail","gridCellStyleCallback","gridCollapsed","gridCollapsing","gridExpanded","gridExpanding","onGrouped","onGrouping","providerDataChanged","providerRestoreRows","providerRowCountChanged","providerRowDeleted","providerRowDeleting","providerRowInserting","providerRowListMoved","providerRowListMoving","providerRowListUpdated","providerRowMoved","providerRowMoving","providerRowsDeleted","providerRowsInserted","providerRowsMoved","providerRowsMoving","providerRowStateChanged","providerRowStatesChanged","providerRowStatesCleared","providerRowsUpdated","providerRowUpdated","providerRowUpdating","providerValueChanged"],setup(e,{expose:t,emit:a}){t(),I.extend(N);const{t:r}=u(),i=e,o=a,n=`${i.gridConfig.gridId}-${c.generateUuid()}`,d=b({totalCount:0,getStateData:{created:[],updated:[],deleted:[]},popupStates:{isProgramPopup:!1,isMessagesPopup:!1},popupDataRowInfo:null}),{totalCount:l,getStateData:s,popupStates:g,popupDataRowInfo:p}=k(d);let m=null,h=null,C=Object.assign(c.cloneDeep(oe.setting),c.cloneDeep(i.gridConfig.setting));P(()=>{h=new T.LocalDataProvider(!0),m=new T.GridView(n),m.setDataSource(h);const e=c.flattenDeep(i.gridConfig.columns),t=e.filter(e=>!c.has(e,"objectKey")).map(e=>{let t={fieldName:c.has(e,"fieldName")?e.fieldName:e.name,dataType:e.dataType};return["datetime"].includes(e.dataType)?t.datetimeFormat=e.datetimeFormat:c.has(e,"renderer")&&c.has(e.renderer,"type")&&["check"].includes(e.renderer.type)&&(t.booleanFormat="False,false,N,0:True,true,Y,1:0"),t});if(c.has(i.gridConfig,"addFields")&&i.gridConfig.addFields.forEach(e=>{t.push(e)}),m.sortMode="explicit",m.filterMode="explicit",h.setFields(t),m.setColumns(e),c.has(i.gridConfig,"layout")){const e=c.flattenDeep(i.gridConfig.layout);m.setColumnLayout(e)}h.restoreMode="auto",h.softDeleting=!0,h.deleteCreated=!0,m.hideDeletedRows=!1,m.setHeader({height:C.headerHeight}),m.setFooter({visible:C.footerVisible,height:C.footerHeight}),m.setCheckBar({visible:C.checkBarVisible,showAll:C.checkBarShowAll,syncHeadCheck:C.syncHeadCheck,exclusive:C.exclusive}),m.setRowIndicator({visible:C.rowIndicatorVisible}),m.setStateBar({visible:C.stateBar}),m.setRowGroup({indentVisible:C.indentVisible}),m.setDisplayOptions({fitStyle:C.fitStyle,showEmptyMessage:C.showEmptyMessage,emptyMessage:C.emptyMessage,rowHeight:C.rowHeight,rowResizable:C.rowResizable,eachRowResizable:C.eachRowResizable,columnMovable:C.columnMovable,showChangeMarker:C.showChangeMarker,useFocusClass:C.useFocusClass}),m.setEditOptions({editable:C.editable,insertable:C.insertable,appendable:C.appendable,commitByCell:C.commitByCell,commitWhenLeave:C.commitWhenLeave,crossWhenExitLast:C.crossWhenExitLast,exceptDataClickWhenButton:C.exceptDataClickWhenButton,validateOnEdited:C.validateOnEdited,validateOnExit:C.validateOnExit,enterToTab:C.enterToTab,commitLevel:C.commitLevel}),m.setFixedOptions({exceptFromSorting:C.exceptFromSorting,colCount:C.colCount}),m.setCopyOptions({lookupDisplay:C.lookupDisplay,convertLookupLabel:C.convertLookupLabel}),m.setPasteOptions({selectBlockPaste:C.selectBlockPaste,checkDomainOnly:C.checkDomainOnly,checkReadOnly:C.checkReadOnly,numberChars:C.numberChars,applyInputChars:C.applyInputChars,eventEachRow:C.eventEachRow}),m.onCellButtonClicked=(e,t,a)=>{o("gridCellButtonClicked",e,t,a)},m.onCellClicked=(e,t)=>{"gridEmpty"!==t.cellType&&o("gridCellClicked",e,t)},m.onCellDblClicked=(e,t)=>{o("gridCellDblClicked",e,t)},m.onCellEdited=(e,t,a,r)=>{o("gridCellEdited",e,t,a,r)},m.onCellItemClicked=(e,t,a)=>{if("link"===a.type&&"javascript:;"===a.url)return!1;if("button"===a.type&&"btnDel"===a.btnId){const e=a.itemIndex;e>-1&&(m.setValue(e,a.fieldName,""),Array.isArray(a.refFields)&&a.refFields.forEach(t=>{m.setValue(e,t,"")}))}"button"===a.type&&"btnSearch"===a.btnId&&(g.value[`is${a.popupId}`]=!0,"MessagesPopup"===a.target.popupId?p.value=Object.assign(a,{nameFields:a.target.nameFields.length>0?a.target.nameFields[0]:a.target.nameFields,refFields:a.target.refFields.length>0?a.target.refFields[0]:a.target.refFields}):p.value=a),o("gridCellItemClicked",e,t,a)},m.onCellPasting=(e,t,a)=>{o("gridCellPasting",e,t,a)},m.onColumnCheckedChanged=(e,t,a)=>{o("gridColumnCheckedChanged",e,t,a)},m.onColumnPropertyChanged=(e,t,a,r,i)=>{o("gridColumnPropertyChanged",e,t,a,r,i)},m.onCommandStackChanged=(e,t,a)=>{o("gridCommandStackChanged",e,t,a)},m.onContextMenuItemClicked=(e,t,a)=>{o("gridContextMenuItemClicked",e,t,a)},m.onContextMenuPopup=(e,t,a,r,i,n)=>{o("gridContextMenuPopup",e,t,a,r,i,n)},m.onCopy=(e,t,a)=>{o("gridCopy",e,t,a)},m.onCurrentChanged=(e,t)=>{o("gridCurrentChanged",e,t)},m.onCurrentChanging=(e,t,a)=>{o("gridCurrentChanging",e,t,a)},m.onCurrentRowChanged=(e,t,a)=>{o("gridCurrentRowChanged",e,t,a)},m.onCut=(e,t,a)=>{o("gridCut",e,t,a)},m.onDataLoadComplated=e=>{o("gridDataLoadComplated",e)},m.onEditCanceled=(e,t)=>{o("gridEditCanceled",e,t)},m.onEditChange=(e,t,a)=>{o("gridEditChange",e,t,a)},m.onEditCommit=(e,t,a,r)=>{o("gridEditCommit",e,t,a,r)},m.onEditRowChanged=(e,t,a,r,i,n)=>{o("gridEditRowChanged",e,t,a,r,i,n)},m.onEditRowPasted=(e,t,a,r,i,n)=>{o("gridEditRowPasted",e,t,a,r,i,n)},m.onEditSearch=(e,t,a)=>{o("gridEditSearch",e,t,a)},m.onErrorClicked=(e,t)=>{o("gridErrorClicked",e,t)},m.onFiltering=(e,t)=>{o("gridFiltering",e,t)},m.onFilteringChanged=(e,t,a)=>{o("gridFilteringChanged",e,t,a)},m.onGetEditValue=(e,t,a)=>{const r=e.columnByName(t.fieldName);if(r.editor&&["date"].includes(r.editor.type)&&r.datetimeFormat){const i=I(a.text,r.datetimeFormat.toUpperCase(),!0).isValid();e.commit(),i?h.setValue(t.dataRow,t.fieldIndex,a.text):h.setValue(t.dataRow,t.fieldIndex,"")}o("gridGetEditValue",e,t,a)},m.onGridActivated=e=>{o("gridGridActivated",e)},m.onHideEditor=(e,t)=>{o("gridHideEditor",e,t)},m.onItemAllChecked=(e,t)=>{o("gridItemAllChecked",e,t)},m.onItemChecked=(e,t,a)=>{o("gridItemChecked",e,t,a)},m.onItemEditCancel=(e,t,a)=>{o("gridItemEditCancel",e,t,a)},m.onItemEditCanceled=(e,t,a)=>{o("gridItemEditCanceled",e,t,a)},m.onItemsChecked=(e,t,a)=>{o("gridItemsChecked",e,t,a)},m.onKeyDown=(e,t)=>{o("gridKeyDown",e,t)},m.onKeyPress=(e,t)=>{o("gridKeypress",e,t)},m.onKeyUp=(e,t)=>{o("gridKeyUp",e,t)},m.onLayoutCollapsed=(e,t)=>{o("gridLayoutCollapsed",e,t)},m.onLayoutCollapsing=(e,t)=>{o("gridLayoutCollapsing",e,t)},m.onLayoutExpanded=(e,t)=>{o("gridLayoutExpanded",e,t)},m.onLayoutExpanding=(e,t)=>{o("gridLayoutExpanding",e,t)},m.onLayoutPropertyChanged=(e,t,a,r,i)=>{o("gridLayoutPropertyChanged",e,t,a,r,i)},m.onLeftPosChanged=(e,t)=>{o("gridLeftPosChanged",e,t)},m.onMenuItemClicked=(e,t,a)=>{o("gridMenuItemClicked",e,t,a)},m.onPaste=(e,t,a)=>{o("gridPaste",e,t,a)},m.onPasted=e=>{o("gridPasted",e)},m.onRowInserting=(e,t,a)=>{o("gridRowInserting",e,t,a)},m.onRowsDeleting=(e,t)=>{o("gridRowsDeleting",e,t)},m.onRowsPasted=(e,t)=>{o("gridRowsPasted",e,t)},m.onScrollToBottom=e=>{o("gridScrollToBottom",e)},m.onSearchCellButtonClick=(e,t,a)=>{o("gridSearchCellButtonClick",e,t,a)},m.onSelectionChanged=e=>{o("gridSelectionChanged",e)},m.onSelectionCleared=e=>{o("gridSelectionCleared",e)},m.onShowEditor=(e,t,a,r)=>{o("gridShowEditor",e,t,a,r)},m.onShowHeaderTooltip=(e,t,a,r)=>{o("gridShowHeaderTooltip",e,t,a,r)},m.onShowTooltip=(e,t,a)=>{o("gridShowTooltip",e,t,a)},m.onSorting=e=>{o("gridSorting",e)},m.onSortingChanged=e=>{o("gridSortingChanged",e)},m.onTopIndexChanged=(e,t)=>{o("gridTopIndexChanged",e,t)},m.onValidateColumn=(e,t,a,r,i,n)=>{o("gridValidateColumn",e,t,a,r,i,n)},m.onValidateRow=(e,t,a,r,i)=>{o("gridValidateRow",e,t,a,r,i)},m.onValidationFail=(e,t,a,r)=>{o("gridValidationFail",e,t,a,r)},m.setCellStyleCallback(function(e,t){if(!C.isReadOnly){const a=t.dataColumn,r=a.tag||{},i=t.item?.rowState;let n=a.styleName||"",d=a.editable||!1;c.has(r,"isAddEditable")&&(d="created"===i);"boolean"!==a.valueType&&!1!==d||!0===r.readOnly||(n+=" realGrid-editable-cell");const l={styleName:n.trim(),editable:d};return o("gridCellStyleCallback",e,t,l),l}}),m.onCollapsed=(e,t)=>{o("gridCollapsed",e,t)},m.onCollapsing=(e,t)=>{o("gridCollapsing",e,t)},m.onExpanded=(e,t)=>{o("gridExpanded",e,t)},m.onExpanding=(e,t)=>{o("gridExpanding",e,t)},m.onGrouped=e=>{o("gridGrouped",e)},m.onGrouping=(e,t)=>{o("gridGrouping",e,t)},h.onDataChanged=e=>{o("providerDataChanged",e)},h.onRestoreRows=(e,t)=>{o("providerRestoreRows",e,t)},h.onRowCountChanged=(e,t)=>{l.value=t,o("providerRowCountChanged",e,t)},h.onRowDeleted=(e,t)=>{s.value=M.getAllStateRows({dataProvider:h}),o("providerRowDeleted",e,t)},h.onRowDeleting=(e,t)=>{o("providerRowDeleting",e,t)},h.onRowInserted=(e,t)=>{s.value.created=M.getStateRows({dataProvider:h,state:"created"}),o("providerRowInserted",e,t)},h.onRowInserting=(e,t,a)=>{o("providerRowInserting",e,t,a)},h.onRowListMoved=(e,t,a)=>{o("providerRowListMoved",e,t,a)},h.onRowListMoving=(e,t,a)=>{o("providerRowListMoving",e,t,a)},h.onRowListUpdated=(e,t)=>{o("providerRowListUpdated",e,t)},h.onRowMoved=(e,t,a)=>{o("providerRowMoved",e,t,a)},h.onRowMoving=(e,t,a)=>{o("providerRowMoving",e,t,a)},h.onRowsDeleted=(e,t)=>{s.value=M.getAllStateRows({dataProvider:h}),o("providerRowsDeleted",e,t)},h.onRowsInserted=(e,t,a)=>{o("providerRowsInserted",e,t,a)},h.onRowsMoved=(e,t,a,r)=>{o("providerRowsMoved",e,t,a,r)},h.onRowsMoving=(e,t,a,r)=>{o("providerRowsMoving",e,t,a,r)},h.onRowStateChanged=(e,t)=>{o("providerRowStateChanged",e,t)},h.onRowStatesChanged=(e,t)=>{s.value=M.getAllStateRows({dataProvider:h}),o("providerRowStatesChanged",e,t)},h.onRowStatesCleared=e=>{o("providerRowStatesCleared",e)},h.onRowsUpdated=(e,t,a)=>{o("providerRowsUpdated",e,t,a)},h.onRowUpdated=(e,t)=>{s.value.updated=M.getStateRows({dataProvider:h,state:"updated"}),o("providerRowUpdated",e,t)},h.onRowUpdating=(e,t,a,r)=>{o("providerRowUpdating",e,t,a,r)},h.onValueChanged=(e,t,a)=>{o("providerValueChanged",e,t,a)},m.registerCustomRenderer("popupLinkRenderer",O),o("gridInit",m,h)}),E(()=>{h.clearRows(),m.destroy(),h.destroy(),m=null,h=null});const y=async()=>{if("function"==typeof i?.gridAddClick){Promise.resolve(i.gridAddClick()).then(async e=>{!0!==await(e?.result)&&void 0!==e||M.addData({gridView:m,data:e?.defaultData})})}else M.addData({gridView:m})},v=()=>{M.copyData({gridView:m,dataProvider:h})},f=()=>{M.removeData({gridView:m,dataProvider:h})},w=async()=>{o("gridSaveClick")},R={addClick:y,copyClick:v,removeClick:f,saveClick:w},S={t:r,props:i,emit:o,gridUid:n,data:d,totalCount:l,getStateData:s,popupStates:g,popupDataRowInfo:p,get gridView(){return m},set gridView(e){m=e},get dataProvider(){return h},set dataProvider(e){h=e},get gridSetting(){return C},set gridSetting(e){C=e},authButtonClick:e=>{const t=R[e.buttonClick];"function"==typeof t&&t()},addClick:y,copyClick:v,removeClick:f,saveClick:w,popupProgramBackHandler:e=>{M.updateRow({gridView:m,dataProvider:h,dataRow:p.value.dataRow,updateRow:e})},popupMessagesBackHandler:e=>{const t={[p.value.refFields]:e.langKey,[p.value.fieldName]:e.langNm};M.updateRow({gridView:m,dataProvider:h,dataRow:p.value.dataRow,updateRow:t})},handlers:R,onMounted:P,onUnmounted:E,reactive:b,toRefs:k,get useI18n(){return u},get dayjs(){return I},get customParseFormat(){return N},get RealGrid(){return T},get utils(){return c},ElementTooltip:D,get gridUtils(){return M},get popupLinkRenderer(){return O},AuthButtons:H,PopupContainer:_,MessagesSearchPopup:Z,ProgramSearchPopup:re,get defaultConfig(){return oe}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}},de={class:"grid_container"},le={class:"grid_btn_group"},se={class:"grid_title"},ge={class:"grid_totalCnt"},ue={class:"grid_totalCnt_tooltip"};const pe=t(ne,[["render",function(e,t,i,d,g,u){return r(),a(s,null,[w("div",de,[w("div",le,[w("div",null,[w("span",se,l(i.gridTitle),1),v(d.ElementTooltip,{isHover:!1,placement:"bottom-end"},{detailBody:n(()=>[w("div",ue,[w("ul",null,[w("li",null,l(d.t("common.grid.addCnt",{count:d.getStateData.created.length})),1),w("li",null,l(d.t("common.grid.editCnt",{count:d.getStateData.updated.length})),1),w("li",null,l(d.t("common.grid.delCnt",{count:d.getStateData.deleted.length})),1)])])]),default:n(()=>[w("span",ge,l(d.t("common.grid.totalCnt",{count:d.totalCount})),1)]),_:1}),i.isEditable?(r(),o(d.AuthButtons,{key:0,programId:i.gridConfig.programId,authId:i.gridConfig.gridId,authPosition:"left",onClick:d.authButtonClick},null,8,["programId","authId"])):y("",!0)]),w("div",null,[i.isEditable?(r(),o(d.AuthButtons,{key:0,programId:i.gridConfig.programId,authId:i.gridConfig.gridId,authPosition:"right",onClick:d.authButtonClick},null,8,["programId","authId"])):y("",!0)])]),(r(),a("div",{class:"grid_area",key:d.gridUid,id:d.gridUid}))]),d.popupStates.isProgramPopup?(r(),o(d.PopupContainer,{key:0,modelValue:d.popupStates.isProgramPopup,"onUpdate:modelValue":t[0]||(t[0]=e=>d.popupStates.isProgramPopup=e),title:d.t("ProgramSearchPopup.title")},{default:n(e=>[v(d.ProgramSearchPopup,{slotProps:e,onCallBackHandler:d.popupProgramBackHandler},null,8,["slotProps"])]),_:1},8,["modelValue","title"])):y("",!0),d.popupStates.isMessagesPopup?(r(),o(d.PopupContainer,{key:1,modelValue:d.popupStates.isMessagesPopup,"onUpdate:modelValue":t[1]||(t[1]=e=>d.popupStates.isMessagesPopup=e),title:d.t("MessagesSearchPopup.title")},{default:n(e=>[v(d.MessagesSearchPopup,{slotProps:e,onCallBackHandler:d.popupMessagesBackHandler},null,8,["slotProps"])]),_:1},8,["modelValue","title"])):y("",!0)],64)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/components/grid/real-grid.vue"]]);export{H as A,Z as M,re as P,pe as R,q as a,ie as b,N as c,oe as d,Y as g,O as p};
