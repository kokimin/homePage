import{A as e,b as t,n as a,v as r,w as i,e as n,d,t as s,h as l,p as o,q as u,i as m,u as g,r as c,B as p,C as v,s as h,D as f,G as w,U as C,T as y,k as I}from"./index-Brc5gCI7.js";import{E as $}from"./element-select-BCEadPkV.js";import{g as T}from"./gridUtils-CpYDX3xm.js";import{T as M}from"./tree-grid-Dk2y0Zjc.js";import{C as x}from"./container-view-8Dpp6B-p.js";import{S as V}from"./search-container-CrqIufVW.js";import{g as j}from"./real-grid-D0HQpUC9.js";import"./popup-container-CgYeCOO4.js";import"./footer-view-DbGzI4eV.js";import"./element-text-D-EPVcTe.js";const{t:k}=e.global,S=(e,t)=>({programId:e,gridId:t,gridTitle:k(`${e}.${t}.title`),columns:[j.text({headerText:k(`${e}.${t}.menuId`),name:"menuId",width:"150",textAlign:"left",required:!0,requiredMessage:k(`${e}.${t}.msg.menuId`),isAddEditable:!0}),j.messagesId({headerText:k(`${e}.${t}.menuNm`),nameField:"menuNmLocale",refField:"menuNm",required:!0,requiredMessage:k(`${e}.${t}.msg.menuNm`)}),j.text({headerText:k(`${e}.${t}.menuUrl`),name:"menuUrl",width:"350",textAlign:"left"}),j.programId(),j.select({headerText:k(`${e}.${t}.useYn`),name:"useYn",width:"100",defaultValue:"Y"})]}),_="gridRef";const Y=t(Object.assign({menuId:"menuMgmt",programId:"MenuMgmt"},{__name:"MenuMgmt",setup(e,{expose:t}){t();const a=u(),r=a?.type.menuId,i=a?.type.programId,{t:n}=l(),d=o("emitter"),s=`mittMenuCheck_${r}`;d.on(s,async e=>{await T.isChangeRowData([{type:"tree",dataProvider:R.value}])&&d.emit(`mitt${e.target}MenuClickEvent`,e.data)});const I=g.cloneDeep(S(i,_)),j=c({isReady:!1,comCodes:{},search:{},gridTitle:I.gridTitle,gridView:null,dataProvider:null}),{isReady:k,comCodes:Y,search:D,gridTitle:P,gridView:b,dataProvider:R}=m(j);p(async()=>{k.value=!1,await v({programId:i}),H(),await q(),k.value=!0}),h(()=>{d.off(s),g.clearAuth(i)}),f(async()=>{await v({programId:i})}),w(async()=>{g.clearAuth(i)});const A=()=>{y({menuId:i,params:D.value}).then(e=>{T.setData({type:"tree",gridView:b.value,dataProvider:R.value,data:e.data})})},U=e=>{y({method:"post",menuId:i,data:e}).then(()=>{A()})},H=()=>{D.value={menuNm:""}},q=async()=>{Y.value.useYn=C.useYn},E={instance:a,menuId:r,programId:i,t:n,emitter:d,mittMenuCheck:s,gridId:_,gridConfig:I,data:j,isReady:k,comCodes:Y,search:D,gridTitle:P,gridView:b,dataProvider:R,getDataHandler:A,saveDataHandler:U,resetHandler:H,init:q,searchHandler:async()=>{await T.isChangeRowData([{type:"tree",dataProvider:R.value}])&&A()},gridInit:async(e,t)=>{b.value=e,R.value=t,await T.setLookupData({gridView:e,field:"useYn",data:Y.value.useYn}),A()},gridSaveClick:async()=>{if(await T.checkValidation({gridView:b.value,dataProvider:R.value})){const e=await T.saveData({type:"tree",gridView:b.value,dataProvider:R.value});e.isConfirmed&&U(e.data)}},getCurrentInstance:u,inject:o,onActivated:f,onBeforeMount:p,onDeactivated:w,onUnmounted:h,reactive:c,toRefs:m,get useI18n(){return l},get _comCode(){return C},get utils(){return g},get apiCommon(){return y},get apiPageAuth(){return v},ElementSelect:$,get gridUtils(){return T},TreeGrid:M,ContainerView:x,SearchContainer:V,get gridSetting(){return S}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),[["render",function(e,t,l,o,u,m){return o.isReady?(I(),a(o.ContainerView,{key:0},{default:i(()=>[n(o.SearchContainer,{onSearch:o.searchHandler,onReset:o.resetHandler},{colgroup:i(()=>t[1]||(t[1]=[d("col",{style:{width:"100px"}},null,-1),d("col",{style:{width:"250px"}},null,-1),d("col",{width:"*"},null,-1)])),default:i(()=>[d("tbody",null,[d("tr",null,[d("th",null,s(o.t(`${o.programId}.search.useYn.title`)),1),d("td",null,[n(o.ElementSelect,{modelValue:o.search.useYn,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search.useYn=e),defaultOptions:{label:o.t("common.title.all"),value:""},options:o.comCodes.useYn},null,8,["modelValue","defaultOptions","options"])]),t[2]||(t[2]=d("td",null,null,-1))])])]),_:1}),n(o.TreeGrid,{gridTitle:o.gridTitle,gridConfig:o.gridConfig,onGridInit:o.gridInit,onGridSaveClick:o.gridSaveClick},null,8,["gridTitle","gridConfig"])]),_:1})):r("",!0)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/views/MenuMgmt/MenuMgmt.vue"]]);export{Y as default};
