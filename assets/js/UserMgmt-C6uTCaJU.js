import{A as e,b as t,n as a,v as r,w as d,e as i,d as l,t as n,h as s,p as o,q as u,i as m,u as g,r as c,B as p,C as h,s as C,D as v,G as w,U as f,T as x,k as $}from"./index-Brc5gCI7.js";import{E as y}from"./element-select-BCEadPkV.js";import{E as I}from"./element-text-D-EPVcTe.js";import{g as T}from"./gridUtils-CpYDX3xm.js";import{g as V,R as k}from"./real-grid-D0HQpUC9.js";import{C as S}from"./container-view-8Dpp6B-p.js";import{S as j}from"./search-container-CrqIufVW.js";import"./popup-container-CgYeCOO4.js";import"./footer-view-DbGzI4eV.js";const{t:D}=e.global,R=(e,t)=>({programId:e,gridId:t,gridTitle:D(`${e}.${t}.title`),columns:[V.text({headerText:D(`${e}.${t}.userId`),name:"userId",width:"150",textAlign:"left",isAddEditable:!0,required:!0,requiredMessage:D(`${e}.${t}.msg.userId`),primaryKey:!0}),V.text({headerText:D(`${e}.${t}.userNm`),name:"userNm",width:"150",textAlign:"left",required:!0,requiredMessage:D(`${e}.${t}.msg.userNm`)}),V.select({headerText:D(`${e}.${t}.authCd`),name:"authCd",width:"100"}),V.select({headerText:D(`${e}.${t}.departmentCd`),name:"departmentCd",width:"100"}),V.text({headerText:D(`${e}.${t}.tel`),name:"tel",width:"150",textAlign:"left"}),V.text({headerText:D(`${e}.${t}.hp`),name:"hp",width:"150",textAlign:"left"}),V.text({headerText:D(`${e}.${t}.email`),name:"email",width:"200",textAlign:"left"}),V.select({headerText:D(`${e}.${t}.useYn`),name:"useYn",width:"100",defaultValue:"Y"})]}),_="gridRef";const A=t(Object.assign({menuId:"userMgmt",programId:"UserMgmt"},{__name:"UserMgmt",setup(e,{expose:t}){t();const a=u(),r=a?.type.menuId,d=a?.type.programId,{t:i}=s(),l=o("emitter"),n=`mittMenuCheck_${r}`;l.on(n,async e=>{await T.isChangeRowData([{dataProvider:b.value}])&&l.emit(`mitt${e.target}MenuClickEvent`,e.data)});const $=g.cloneDeep(R(d,_)),V=c({isReady:!1,comCodes:{},search:{},gridTitle:$.gridTitle,gridView:null,dataProvider:null}),{isReady:D,comCodes:A,search:M,gridTitle:U,gridView:P,dataProvider:b}=m(V);p(async()=>{D.value=!1,await h({programId:d}),Y(),await H(),D.value=!0}),C(()=>{l.off(n),g.clearAuth(d)}),v(async()=>{await h({programId:d})}),w(async()=>{g.clearAuth(d)});const E=()=>{x({menuId:d,params:M.value}).then(e=>{T.setData({gridView:P.value,dataProvider:b.value,data:e.data})})},N=e=>{x({method:"post",menuId:d,data:e}).then(()=>{E()})},Y=()=>{M.value={idName:"",departmentCd:""}},H=async()=>{A.value.useYn=f.useYn,await g.putCodes(["authCd","departmentCd"]),A.value.authCd=await g.getCode("authCd"),A.value.departmentCd=await g.getCode("departmentCd")},q={instance:a,menuId:r,programId:d,t:i,emitter:l,mittMenuCheck:n,gridId:_,gridConfig:$,data:V,isReady:D,comCodes:A,search:M,gridTitle:U,gridView:P,dataProvider:b,getDataHandler:E,saveDataHandler:N,resetHandler:Y,init:H,searchHandler:async()=>{await T.isChangeRowData([{dataProvider:b.value}])&&E()},gridInit:async(e,t)=>{P.value=e,b.value=t,await T.setLookupData({gridView:e,field:"useYn",data:A.value.useYn}),await T.setLookupData({gridView:e,field:"authCd",data:A.value.authCd}),await T.setLookupData({gridView:e,field:"departmentCd",data:A.value.departmentCd}),E()},gridSaveClick:async()=>{if(await T.checkValidation({gridView:P.value,dataProvider:b.value})){const e=await T.saveData({gridView:P.value,dataProvider:b.value});e.isConfirmed&&N(e.data)}},getCurrentInstance:u,inject:o,onActivated:v,onBeforeMount:p,onDeactivated:w,onUnmounted:C,reactive:c,toRefs:m,get useI18n(){return s},get _comCode(){return f},get utils(){return g},get apiCommon(){return x},get apiPageAuth(){return h},ElementSelect:y,ElementText:I,get gridUtils(){return T},RealGrid:k,ContainerView:S,SearchContainer:j,get gridSetting(){return R}};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}}),[["render",function(e,t,s,o,u,m){return o.isReady?($(),a(o.ContainerView,{key:0},{default:d(()=>[i(o.SearchContainer,{onSearch:o.searchHandler,onReset:o.resetHandler},{colgroup:d(()=>t[2]||(t[2]=[l("col",{style:{width:"100px"}},null,-1),l("col",{style:{width:"250px"}},null,-1),l("col",{style:{width:"100px"}},null,-1),l("col",{style:{width:"250px"}},null,-1),l("col",{width:"*"},null,-1)])),default:d(()=>[l("tbody",null,[l("tr",null,[l("th",null,n(o.t(`${o.programId}.search.idName.title`)),1),l("td",null,[i(o.ElementText,{modelValue:o.search.idName,"onUpdate:modelValue":t[0]||(t[0]=e=>o.search.idName=e),placeholder:o.t(`${o.programId}.search.idName.title.placeholder`)},null,8,["modelValue","placeholder"])]),l("th",null,n(o.t(`${o.programId}.search.departmentCd.title`)),1),l("td",null,[i(o.ElementSelect,{modelValue:o.search.departmentCd,"onUpdate:modelValue":t[1]||(t[1]=e=>o.search.departmentCd=e),defaultOptions:{label:o.t("common.title.all"),value:""},options:o.comCodes.departmentCd},null,8,["modelValue","defaultOptions","options"])]),t[3]||(t[3]=l("td",null,null,-1))])])]),_:1}),i(o.RealGrid,{gridTitle:o.gridTitle,gridConfig:o.gridConfig,onGridInit:o.gridInit,onGridSaveClick:o.gridSaveClick},null,8,["gridTitle","gridConfig"])]),_:1})):r("",!0)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/views/UserMgmt/UserMgmt.vue"]]);export{A as default};
