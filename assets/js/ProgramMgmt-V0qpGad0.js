import{A as e,b as a,c as t,n as r,v as i,w as d,e as o,d as n,t as l,F as u,h as g,p as s,q as m,i as p,u as c,r as v,B as C,C as w,s as h,D as P,G as I,U as f,T as B,k as b}from"./index-Brc5gCI7.js";import{E as G}from"./element-split-panes-D8f3p_XR.js";import{E as k}from"./element-select-BCEadPkV.js";import{E as R}from"./element-text-D-EPVcTe.js";import{g as $}from"./gridUtils-CpYDX3xm.js";import{g as S,R as V}from"./real-grid-D0HQpUC9.js";import{C as y}from"./container-view-8Dpp6B-p.js";import{P as T}from"./popup-container-CgYeCOO4.js";import{S as D}from"./search-container-CrqIufVW.js";import x from"./ButtonSearchPopup-BlrCXiG5.js";import"./footer-view-DbGzI4eV.js";const{t:j}=e.global,A=(e,a)=>({programId:e,gridId:a,gridTitle:j(`${e}.${a}.title`),setting:{isReadOnly:!0},columns:[S.hidden({name:"programId"}),S.hidden({name:"btnGrpId"}),S.text({headerText:j(`${e}.${a}.buttonId`),name:"buttonId",editable:!1,width:150}),S.messagesId({headerText:j(`${e}.${a}.buttonName`),nameField:"buttonNameLocale",refField:"buttonName",isVisible:!1}),S.select({headerText:j(`${e}.${a}.buttonSize`),name:"buttonSize",editable:!1,width:150})]}),{t:E}=e.global,U=(e,a)=>({programId:e,gridId:a,gridTitle:E(`${e}.${a}.title`),columns:[S.hidden({name:"programId"}),S.text({headerText:E(`${e}.${a}.btnGrpId`),name:"btnGrpId",textAlign:"left",isAddEditable:!0,required:!0,requiredMessage:E(`${e}.${a}.msg.btnGrpId`),primaryKey:!0,width:"150"}),S.text({headerText:E(`${e}.${a}.description`),name:"description",textAlign:"left",width:"300"}),S.button({headerText:E(`${e}.${a}.action`),name:"action",width:"150"})]}),{t:_}=e.global,Y=(e,a)=>({programId:e,gridId:a,gridTitle:_(`${e}.${a}.title`),columns:[S.text({headerText:_(`${e}.${a}.programId`),name:"programId",width:"130",textAlign:"left",isAddEditable:!0,required:!0,requiredMessage:_(`${e}.${a}.msg.programId`),primaryKey:!0}),S.text({headerText:_(`${e}.${a}.programNm`),name:"programNm",width:"130",textAlign:"left",required:!0,requiredMessage:_(`${e}.${a}.msg.programNm`)}),S.text({headerText:_(`${e}.${a}.programPath`),name:"programPath",width:"130",textAlign:"left"}),S.select({headerText:_(`${e}.${a}.useYn`),name:"useYn",width:"80",defaultValue:"Y"}),S.button({headerText:_("common.grid.action"),name:"action",width:"120"})]}),M="gridProgramRef",N="gridBtnGroupRef",H="gridBtnCodeRef";const O=a(Object.assign({menuId:"programMgmt",programId:"ProgramMgmt"},{__name:"ProgramMgmt",setup(e,{expose:a}){a();const t=m(),r=t?.type.menuId,i=t?.type.programId,{t:d}=g(),o=s("emitter"),n=`mittMenuCheck_${r}`;o.on(n,async e=>{await $.isChangeRowData([{dataProvider:q.value},{dataProvider:K.value},{dataProvider:Z.value}])&&o.emit(`mitt${e.target}MenuClickEvent`,e.data)});const l=c.cloneDeep(Y(i,M)),u=c.cloneDeep(U(i,N)),b=c.cloneDeep(A(i,H)),S=v({isReady:!1,comCodes:{},search:{},gridProgramTitle:l.gridTitle,gridProgramView:null,dataProgramProvider:null,selectedProgramRowInfo:{},gridBtnGroupTitle:u.gridTitle,gridBtnGroupView:null,dataBtnGroupProvider:null,selectedBtnGroupRowInfo:{},gridBtnCodeTitle:b.gridTitle,gridBtnCodeView:null,dataBtnCodeProvider:null,isPopupButton:!1}),{isReady:j,comCodes:E,search:_,gridProgramTitle:O,gridProgramView:z,dataProgramProvider:q,selectedProgramRowInfo:L,gridBtnGroupTitle:F,gridBtnGroupView:J,dataBtnGroupProvider:K,selectedBtnGroupRowInfo:W,gridBtnCodeTitle:Q,gridBtnCodeView:X,dataBtnCodeProvider:Z,isPopupButton:ee}=p(S);C(async()=>{j.value=!1,await w({programId:i}),ne(),await le(),j.value=!0}),h(()=>{o.off(n),c.clearAuth(i)}),P(async()=>{await w({programId:i})}),I(async()=>{c.clearAuth(i)});const ae=()=>{B({menuId:i,params:_.value}).then(e=>{$.setData({gridView:z.value,dataProvider:q.value,data:e.data}),$.setData({gridView:J.value,dataProvider:K.value,data:[]}),$.setData({gridView:X.value,dataProvider:Z.value,data:[]}),L.value={},W.value={}})},te=e=>{B({method:"post",menuId:i,data:e}).then(()=>{ae()})},re=e=>{B({menuId:i,pathUrl:"btnGrpUrl",params:{programId:e.programId}}).then(e=>{$.setData({gridView:J.value,dataProvider:K.value,data:e.data}),$.setData({gridView:X.value,dataProvider:Z.value,data:[]}),W.value={}})},ie=e=>{B({method:"post",menuId:i,pathUrl:"btnGrpUrl",data:e}).then(()=>{re(L.value)})},de=e=>{B({menuId:i,pathUrl:"btnCodeUrl",params:{programId:e.programId,btnGrpId:e.btnGrpId}}).then(e=>{$.setData({gridView:X.value,dataProvider:Z.value,data:e.data})})},oe=e=>{B({method:"post",menuId:i,pathUrl:"btnCodeUrl",data:e}).then(()=>{de(W.value)})},ne=()=>{_.value={idName:"",useYn:""}},le=async()=>{await c.putCodes(["btnGrpCd","btnSize","btnColor"]),E.value.btnGrpCd=await c.getCode("btnGrpCd"),E.value.btnSize=await c.getCode("btnSize"),E.value.btnColor=await c.getCode("btnColor"),E.value.useYn=f.useYn},ue={instance:t,menuId:r,programId:i,t:d,emitter:o,mittMenuCheck:n,gridProgramId:M,gridProgramConfig:l,gridBtnGroupId:N,gridBtnGroupConfig:u,gridBtnCodeId:H,gridBtnCodeConfig:b,data:S,isReady:j,comCodes:E,search:_,gridProgramTitle:O,gridProgramView:z,dataProgramProvider:q,selectedProgramRowInfo:L,gridBtnGroupTitle:F,gridBtnGroupView:J,dataBtnGroupProvider:K,selectedBtnGroupRowInfo:W,gridBtnCodeTitle:Q,gridBtnCodeView:X,dataBtnCodeProvider:Z,isPopupButton:ee,getProgramDataHandler:ae,saveProgramDataHandler:te,getBtnGroupDataHandler:re,saveBtnGroupDataHandler:ie,getBtnCodeDataHandler:de,saveBtnCodeDataHandler:oe,resetHandler:ne,init:le,searchHandler:async()=>{await $.isChangeRowData([{dataProvider:q.value},{dataProvider:K.value},{dataProvider:Z.value}])&&ae()},popupButtonCallBack:e=>{const a=e.map(e=>Object.assign(e,{programId:W.value.programId,btnGrpId:W.value.btnGrpId}));$.addRows({dataProvider:Z.value,rows:a})},gridProgramInit:async(e,a)=>{z.value=e,q.value=a,await $.setLookupData({gridView:e,field:"useYn",data:E.value.useYn}),ae()},gridProgramSaveClick:async()=>{if(await $.checkValidation({gridView:z.value,dataProvider:q.value})&&await $.isChangeRowData([{dataProvider:K.value},{dataProvider:Z.value}],"isChangeRowDataSave")){const e=await $.saveData({gridView:z.value,dataProvider:q.value});e.isConfirmed&&te(e.data)}},gridProgramCellItemClicked:async(e,a,t)=>{if(await $.isChangeRowData([{dataProvider:K.value},{dataProvider:Z.value}])){const e=$.getJsonRow({dataProvider:q.value,dataRow:t.dataRow});L.value=e,re(e)}},gridBtnGroupInit:async(e,a)=>{J.value=e,K.value=a,await $.setLookupData({gridView:e,field:"btnGrpCd",data:E.value.btnGrpCd})},gridBtnGroupSaveClick:async()=>{if(await $.checkValidation({gridView:J.value,dataProvider:K.value})&&await $.isChangeRowData([{dataProvider:Z.value}],"isChangeRowDataSave")){const e=await $.saveData({gridView:J.value,dataProvider:K.value});e.isConfirmed&&ie(e.data)}},gridBtnGroupAddClick:()=>({defaultData:{programId:L.value.programId},result:!0}),gridBtnGroupCellItemClicked:async(e,a,t)=>{if(await $.isChangeRowData([{dataProvider:Z.value}])){const e=$.getJsonRow({dataProvider:K.value,dataRow:t.dataRow});W.value=e,de(e)}},gridBtnCodeInit:async(e,a)=>{X.value=e,Z.value=a,await $.setLookupData({gridView:e,field:"buttonSize",data:E.value.btnSize}),await $.setLookupData({gridView:e,field:"buttonColor",data:E.value.btnColor})},gridBtnCodeSaveClick:async()=>{if(await $.checkValidation({gridView:X.value,dataProvider:Z.value})){const e=await $.saveData({gridView:X.value,dataProvider:Z.value});e.isConfirmed&&oe(e.data)}},gridBtnCodeAddClick:()=>(ee.value=!0,{result:!1}),getCurrentInstance:m,inject:s,onActivated:P,onBeforeMount:C,onDeactivated:I,onUnmounted:h,reactive:v,toRefs:p,get useI18n(){return g},get _comCode(){return f},get utils(){return c},get apiCommon(){return B},get apiPageAuth(){return w},ElementSplitPanes:G,ElementSelect:k,ElementText:R,get gridUtils(){return $},RealGrid:V,ContainerView:y,PopupContainer:T,SearchContainer:D,ButtonSearchPopup:x,get gridBtnCodeSetting(){return A},get gridBtnGroupSetting(){return U},get gridProgramSetting(){return Y}};return Object.defineProperty(ue,"__isScriptSetup",{enumerable:!1,value:!0}),ue}}),[["render",function(e,a,g,s,m,p){return b(),t(u,null,[s.isReady?(b(),r(s.ContainerView,{key:0},{default:d(()=>[o(s.SearchContainer,{onSearch:s.searchHandler,onReset:s.resetHandler},{colgroup:d(()=>a[3]||(a[3]=[n("col",{style:{width:"100px"}},null,-1),n("col",{style:{width:"250px"}},null,-1),n("col",{style:{width:"100px"}},null,-1),n("col",{style:{width:"250px"}},null,-1),n("col",{width:"*"},null,-1)])),default:d(()=>[n("tbody",null,[n("tr",null,[n("th",null,l(s.t(`${s.programId}.search.idName.title`)),1),n("td",null,[o(s.ElementText,{modelValue:s.search.idName,"onUpdate:modelValue":a[0]||(a[0]=e=>s.search.idName=e),placeholder:s.t(`${s.programId}.search.idName.title.placeholder`)},null,8,["modelValue","placeholder"])]),n("th",null,l(s.t("common.title.useYn")),1),n("td",null,[o(s.ElementSelect,{modelValue:s.search.useYnuseYn,"onUpdate:modelValue":a[1]||(a[1]=e=>s.search.useYnuseYn=e),defaultOptions:{label:s.t("common.title.all"),value:""},options:s.comCodes.useYn},null,8,["modelValue","defaultOptions","options"])]),a[4]||(a[4]=n("td",null,null,-1))])])]),_:1}),o(s.ElementSplitPanes,null,{leftSlot:d(()=>[o(s.RealGrid,{gridTitle:s.gridProgramTitle,gridConfig:s.gridProgramConfig,onGridInit:s.gridProgramInit,onGridSaveClick:s.gridProgramSaveClick,onGridCellItemClicked:s.gridProgramCellItemClicked},null,8,["gridTitle","gridConfig"])]),rightSlot:d(()=>[o(s.ElementSplitPanes,{leftSize:30,horizontal:!0},{leftSlot:d(()=>[o(s.RealGrid,{gridTitle:`${s.gridBtnGroupTitle}${Object.keys(s.selectedProgramRowInfo).length>0?`: ${s.selectedProgramRowInfo.programNm}`:""}`,gridConfig:s.gridBtnGroupConfig,isEditable:Object.keys(s.selectedProgramRowInfo).length>0,gridAddClick:s.gridBtnGroupAddClick,onGridInit:s.gridBtnGroupInit,onGridSaveClick:s.gridBtnGroupSaveClick,onGridCellItemClicked:s.gridBtnGroupCellItemClicked},null,8,["gridTitle","gridConfig","isEditable"])]),rightSlot:d(()=>[o(s.RealGrid,{gridTitle:`${s.gridBtnCodeTitle}${Object.keys(s.selectedBtnGroupRowInfo).length>0?`: ${s.selectedBtnGroupRowInfo.description}`:""}`,gridConfig:s.gridBtnCodeConfig,isEditable:Object.keys(s.selectedBtnGroupRowInfo).length>0,gridAddClick:s.gridBtnCodeAddClick,onGridInit:s.gridBtnCodeInit,onGridSaveClick:s.gridBtnCodeSaveClick},null,8,["gridTitle","gridConfig","isEditable"])]),_:1})]),_:1})]),_:1})):i("",!0),s.isPopupButton?(b(),r(s.PopupContainer,{key:1,modelValue:s.isPopupButton,"onUpdate:modelValue":a[2]||(a[2]=e=>s.isPopupButton=e),title:"버튼 조회"},{default:d(e=>[o(s.ButtonSearchPopup,{slotProps:e,onCallBackHandler:s.popupButtonCallBack},null,8,["slotProps"])]),_:1},8,["modelValue"])):i("",!0)],64)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/views/ProgramMgmt/ProgramMgmt.vue"]]);export{O as default};
