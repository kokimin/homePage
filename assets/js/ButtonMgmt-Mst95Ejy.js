import{A as e,b as t,n as a,v as i,w as r,e as n,d,t as o,h as l,p as s,q as u,i as m,u as g,r as c,B as p,C as h,s as v,D as C,G as w,T as b,k as f}from"./index-Brc5gCI7.js";import{E as y}from"./element-text-D-EPVcTe.js";import{g as I}from"./gridUtils-CpYDX3xm.js";import{g as $,R as S}from"./real-grid-D0HQpUC9.js";import{C as k}from"./container-view-8Dpp6B-p.js";import{S as T}from"./search-container-CrqIufVW.js";import"./popup-container-CgYeCOO4.js";import"./footer-view-DbGzI4eV.js";const{t:x}=e.global,V=(e,t)=>({programId:e,gridId:t,gridTitle:x(`${e}.${t}.title`),columns:[$.text({headerText:x(`${e}.${t}.buttonId`),name:"buttonId",isAddEditable:!0,required:!0,requiredMessage:x(`${e}.${t}.msg.buttonId`),primaryKey:!0,width:100}),$.messagesId({headerText:x(`${e}.${t}.buttonName`),nameField:"buttonNameLocale",refField:"buttonName"}),$.select({headerText:x(`${e}.${t}.buttonSize`),name:"buttonSize",required:!0,width:100}),$.select({headerText:x(`${e}.${t}.buttonColor`),name:"buttonColor",required:!0,width:100}),$.select({headerText:x(`${e}.${t}.buttonPosition`),name:"buttonPosition",required:!0,width:100}),$.text({headerText:x(`${e}.${t}.buttonClick`),name:"buttonClick",required:!0,requiredMessage:x(`${e}.${t}.msg.buttonClick`),primaryKey:!0,width:150})]}),P="gridRef";const R=t(Object.assign({menuId:"buttonMgmt",programId:"ButtonMgmt"},{__name:"ButtonMgmt",setup(e,{expose:t}){t();const a=u(),i=a?.type.menuId,r=a?.type.programId,{t:n}=l(),d=s("emitter"),o=`mittMenuCheck_${i}`;d.on(o,async e=>{await I.isChangeRowData([{dataProvider:_.value}])&&d.emit(`mitt${e.target}MenuClickEvent`,e.data)});const f=g.cloneDeep(V(r,P)),$=c({isReady:!1,comCodes:{},search:{},gridTitle:f.gridTitle,gridView:null,dataProvider:null}),{isReady:x,comCodes:R,search:j,gridTitle:D,gridView:M,dataProvider:_}=m($);p(async()=>{x.value=!1,await h({programId:r}),z(),await A(),x.value=!0}),v(()=>{d.off(o),g.clearAuth(r)}),C(async()=>{await h({programId:r})}),w(async()=>{g.clearAuth(r)});const q=()=>{b({menuId:r,params:j.value}).then(e=>{I.setData({gridView:M.value,dataProvider:_.value,data:e.data})})},N=e=>{b({method:"post",menuId:r,data:e}).then(()=>{q()})},z=()=>{j.value={idName:""}},A=async()=>{await g.putCodes(["btnSize","btnColor"]),R.value.btnSize=await g.getCode("btnSize"),R.value.btnColor=await g.getCode("btnColor")},B={instance:a,menuId:i,programId:r,t:n,emitter:d,mittMenuCheck:o,gridId:P,gridConfig:f,data:$,isReady:x,comCodes:R,search:j,gridTitle:D,gridView:M,dataProvider:_,getDataHandler:q,saveDataHandler:N,resetHandler:z,init:A,searchHandler:async()=>{await I.isChangeRowData([{dataProvider:_.value}])&&q()},gridInit:async(e,t)=>{M.value=e,_.value=t,await I.setLookupData({gridView:e,field:"buttonSize",data:R.value.btnSize}),await I.setLookupData({gridView:e,field:"buttonColor",data:R.value.btnColor}),q()},gridSaveClick:async()=>{if(await I.checkValidation({gridView:M.value,dataProvider:_.value})){const e=await I.saveData({gridView:M.value,dataProvider:_.value});e.isConfirmed&&N(e.data)}},getCurrentInstance:u,inject:s,onActivated:C,onBeforeMount:p,onDeactivated:w,onUnmounted:v,reactive:c,toRefs:m,get useI18n(){return l},get utils(){return g},get apiCommon(){return b},get apiPageAuth(){return h},ElementText:y,get gridUtils(){return I},RealGrid:S,ContainerView:k,SearchContainer:T,get gridSetting(){return V}};return Object.defineProperty(B,"__isScriptSetup",{enumerable:!1,value:!0}),B}}),[["render",function(e,t,l,s,u,m){return s.isReady?(f(),a(s.ContainerView,{key:0},{default:r(()=>[n(s.SearchContainer,{onSearch:s.searchHandler,onReset:s.resetHandler},{colgroup:r(()=>t[1]||(t[1]=[d("col",{style:{width:"100px"}},null,-1),d("col",{style:{width:"250px"}},null,-1),d("col",{width:"*"},null,-1)])),default:r(()=>[d("tbody",null,[d("tr",null,[d("th",null,o(s.t(`${s.programId}.search.idName.title`)),1),d("td",null,[n(s.ElementText,{modelValue:s.search.idName,"onUpdate:modelValue":t[0]||(t[0]=e=>s.search.idName=e),placeholder:s.t(`${s.programId}.search.idName.title.placeholder`)},null,8,["modelValue","placeholder"])]),t[2]||(t[2]=d("td",null,null,-1))])])]),_:1}),n(s.RealGrid,{gridTitle:s.gridTitle,gridConfig:s.gridConfig,onGridInit:s.gridInit,onGridSaveClick:s.gridSaveClick},null,8,["gridTitle","gridConfig"])]),_:1})):i("",!0)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/views/ButtonMgmt/ButtonMgmt.vue"]]);export{R as default};
