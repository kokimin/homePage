import{A as e,b as a,n as t,v as r,w as i,e as d,d as n,t as l,h as s,p as o,q as g,i as u,u as m,r as c,B as p,C as h,s as v,D as f,G as w,T as y,k as C}from"./index-WruVlziS.js";import{E as I}from"./element-text-BpkoH2im.js";import{g as x}from"./gridUtils-DjHApC85.js";import{g as T,R as $}from"./real-grid-BQCIEb0Q.js";import{C as S}from"./container-view-CBvq7VkV.js";import{S as b}from"./search-container-5xxIWbSQ.js";import"./popup-container-Dv1dBd7I.js";import"./footer-view-BaCAMA_D.js";const{t:R}=e.global,k=(e,a)=>({programId:e,gridId:a,gridTitle:R(`${e}.${a}.title`),columns:[T.text({headerText:R(`${e}.${a}.boardType`),name:"boardType",width:"150",textAlign:"left",isAddEditable:!0,required:!0,requiredMessage:R(`${e}.${a}.boardType.msg`),primaryKey:!0}),T.text({headerText:R(`${e}.${a}.boardNm`),name:"boardNm",width:"150",textAlign:"left",required:!0,requiredMessage:R(`${e}.${a}.msg.boardNm`)}),T.check({headerText:R(`${e}.${a}.dateRange`),name:"dateRange",width:"150"}),T.text({headerText:R(`${e}.${a}.desc`),name:"desc",width:"150",textAlign:"left"})]}),V="gridRef";const j=a(Object.assign({menuId:"boardStgMgmt",programId:"BoardStgMgmt"},{__name:"BoardStgMgmt",setup(e,{expose:a}){a();const t=g(),r=t?.type.menuId,i=t?.type.programId,{t:d}=s(),n=o("emitter"),l=`mittMenuCheck_${r}`;n.on(l,async e=>{await x.isChangeRowData([{dataProvider:P.value}])&&n.emit(`mitt${e.target}MenuClickEvent`,e.data)});const C=m.cloneDeep(k(i,V)),T=c({isReady:!1,search:{},gridTitle:C.gridTitle,gridView:null,dataProvider:null}),{isReady:R,search:j,gridTitle:M,gridView:_,dataProvider:P}=u(T);p(async()=>{R.value=!1,await h({programId:i}),N(),await B(),R.value=!0}),v(()=>{n.off(l),m.clearAuth(i)}),f(async()=>{await h({programId:i})}),w(async()=>{m.clearAuth(i)});const A=()=>{y({menuId:i,params:j.value}).then(e=>{x.setData({gridView:_.value,dataProvider:P.value,data:e.data})})},D=e=>{y({method:"post",menuId:i,data:e}).then(()=>{A()})},N=()=>{j.value={idName:""}},B=async()=>{},H={instance:t,menuId:r,programId:i,t:d,emitter:n,mittMenuCheck:l,gridId:V,gridConfig:C,data:T,isReady:R,search:j,gridTitle:M,gridView:_,dataProvider:P,getDataHandler:A,saveDataHandler:D,resetHandler:N,init:B,searchHandler:async()=>{await x.isChangeRowData([{dataProvider:P.value}])&&A()},gridInit:async(e,a)=>{_.value=e,P.value=a,A()},gridSaveClick:async()=>{if(await x.checkValidation({gridView:_.value,dataProvider:P.value})){const e=await x.saveData({gridView:_.value,dataProvider:P.value});e.isConfirmed&&D(e.data)}},getCurrentInstance:g,inject:o,onActivated:f,onBeforeMount:p,onDeactivated:w,onUnmounted:v,reactive:c,toRefs:u,get useI18n(){return s},get utils(){return m},get apiCommon(){return y},get apiPageAuth(){return h},ElementText:I,get gridUtils(){return x},RealGrid:$,ContainerView:S,SearchContainer:b,get gridSetting(){return k}};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}}),[["render",function(e,a,s,o,g,u){return o.isReady?(C(),t(o.ContainerView,{key:0},{default:i(()=>[d(o.SearchContainer,{onSearch:o.searchHandler,onReset:o.resetHandler},{colgroup:i(()=>a[1]||(a[1]=[n("col",{style:{width:"100px"}},null,-1),n("col",{style:{width:"250px"}},null,-1),n("col",{width:"*"},null,-1)])),default:i(()=>[n("tbody",null,[n("tr",null,[n("th",null,l(o.t(`${o.programId}.search.idName.title`)),1),n("td",null,[d(o.ElementText,{modelValue:o.search.idName,"onUpdate:modelValue":a[0]||(a[0]=e=>o.search.idName=e),placeholder:o.t(`${o.programId}.search.idName.title.placeholder`)},null,8,["modelValue","placeholder"])]),a[2]||(a[2]=n("td",null,null,-1))])])]),_:1}),d(o.RealGrid,{gridTitle:o.gridTitle,gridConfig:o.gridConfig,onGridInit:o.gridInit,onGridSaveClick:o.gridSaveClick},null,8,["gridTitle","gridConfig"])]),_:1})):r("",!0)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/views/BoardStgMgmt/BoardStgMgmt.vue"]]);export{j as default};
