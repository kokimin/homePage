import{A as e,b as a,n as t,v as r,w as i,e as n,d,t as s,h as l,p as o,q as g,i as u,u as m,r as c,B as p,C as h,s as v,D as f,G as w,T as y,k as C}from"./index-WruVlziS.js";import{E as I}from"./element-text-BpkoH2im.js";import{g as $}from"./gridUtils-DjHApC85.js";import{g as x,R as M}from"./real-grid-BQCIEb0Q.js";import{C as T}from"./container-view-CBvq7VkV.js";import{S as k}from"./search-container-5xxIWbSQ.js";import"./popup-container-Dv1dBd7I.js";import"./footer-view-BaCAMA_D.js";const{t:R}=e.global,V=(e,a)=>({programId:e,gridId:a,gridTitle:R(`${e}.${a}.title`),columns:[x.text({headerText:R(`${e}.${a}.langKey`),name:"langKey",width:"150",textAlign:"left",isAddEditable:!0,required:!0,requiredMessage:R(`${e}.${a}.msg.langKey`),primaryKey:!0}),x.text({headerText:R(`${e}.${a}.langKo`),name:"langKo",width:"150",textAlign:"left",required:!0,requiredMessage:R(`${e}.${a}.msg.langKo`)}),x.text({headerText:R(`${e}.${a}.langEn`),name:"langEn",width:"150",textAlign:"left",required:!0,requiredMessage:R(`${e}.${a}.msg.langEn`)})]}),j="gridRef";const S=a(Object.assign({menuId:"messagesMgmt",programId:"MessagesMgmt"},{__name:"MessagesMgmt",setup(e,{expose:a}){a();const t=g(),r=t?.type.menuId,i=t?.type.programId,{t:n}=l(),d=o("emitter"),s=`mittMenuCheck_${r}`;d.on(s,async e=>{await $.isChangeRowData([{dataProvider:A.value}])&&d.emit(`mitt${e.target}MenuClickEvent`,e.data)});const C=m.cloneDeep(V(i,j)),x=c({isReady:!1,search:{},gridTitle:C.gridTitle,gridView:null,dataProvider:null}),{isReady:R,search:S,gridTitle:_,gridView:P,dataProvider:A}=u(x);p(async()=>{R.value=!1,await h({programId:i}),E(),await q(),R.value=!0}),v(()=>{d.off(s),m.clearAuth(i)}),f(async()=>{await h({programId:i})}),w(async()=>{m.clearAuth(i)});const D=()=>{y({menuId:i,params:S.value}).then(e=>{$.setData({gridView:P.value,dataProvider:A.value,data:e.data})})},b=e=>{y({method:"post",menuId:i,data:e}).then(()=>{D()})},E=()=>{S.value={idName:""}},q=async()=>{},K={instance:t,menuId:r,programId:i,t:n,emitter:d,mittMenuCheck:s,gridId:j,gridConfig:C,data:x,isReady:R,search:S,gridTitle:_,gridView:P,dataProvider:A,getDataHandler:D,saveDataHandler:b,resetHandler:E,init:q,searchHandler:async()=>{await $.isChangeRowData([{dataProvider:A.value}])&&D()},gridInit:async(e,a)=>{P.value=e,A.value=a,D()},gridSaveClick:async()=>{if(await $.checkValidation({gridView:P.value,dataProvider:A.value})){const e=await $.saveData({gridView:P.value,dataProvider:A.value});e.isConfirmed&&b(e.data)}},getCurrentInstance:g,inject:o,onActivated:f,onBeforeMount:p,onDeactivated:w,onUnmounted:v,reactive:c,toRefs:u,get useI18n(){return l},get utils(){return m},get apiCommon(){return y},get apiPageAuth(){return h},ElementText:I,get gridUtils(){return $},RealGrid:M,ContainerView:T,SearchContainer:k,get gridSetting(){return V}};return Object.defineProperty(K,"__isScriptSetup",{enumerable:!1,value:!0}),K}}),[["render",function(e,a,l,o,g,u){return o.isReady?(C(),t(o.ContainerView,{key:0},{default:i(()=>[n(o.SearchContainer,{onSearch:o.searchHandler,onReset:o.resetHandler},{colgroup:i(()=>a[1]||(a[1]=[d("col",{style:{width:"100px"}},null,-1),d("col",{style:{width:"250px"}},null,-1),d("col",{width:"*"},null,-1)])),default:i(()=>[d("tbody",null,[d("tr",null,[d("th",null,s(o.t(`${o.programId}.search.idName.title`)),1),d("td",null,[n(o.ElementText,{modelValue:o.search.idName,"onUpdate:modelValue":a[0]||(a[0]=e=>o.search.idName=e),placeholder:o.t(`${o.programId}.search.idName.title.placeholder`)},null,8,["modelValue","placeholder"])]),a[2]||(a[2]=d("td",null,null,-1))])])]),_:1}),n(o.RealGrid,{gridTitle:o.gridTitle,gridConfig:o.gridConfig,onGridInit:o.gridInit,onGridSaveClick:o.gridSaveClick},null,8,["gridTitle","gridConfig"])]),_:1})):r("",!0)}],["__file","/Users/kokimin/WorkSpace/vue_design_system/src/views/MessagesMgmt/MessagesMgmt.vue"]]);export{S as default};
